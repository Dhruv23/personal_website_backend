# Supabase Setup Instructions

## 1. Create a Project
1.  Go to [Supabase](https://supabase.com/) and create a new project.
2.  Once created, navigate to **Settings > API**.

## 2. Environment Variables
Create a `.env.local` file in the root of your project and add the following keys from your Supabase API settings:

```env
NEXT_PUBLIC_SUPABASE_URL=your_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

## 3. Database Schema
Go to the **SQL Editor** in your Supabase dashboard and run the following SQL to create the `site_config` table and insert the initial configuration:

```sql
-- Create the configuration table
CREATE TABLE site_config (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  data JSONB NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Insert the initial default configuration (replace with your desired JSON if needed)
INSERT INTO site_config (data) VALUES ('{
  "siteMetadata": {
    "title": "Adhrin - Portfolio",
    "description": "Full-stack Developer & UI/UX Designer",
    "favicon": "/favicon.ico"
  },
  "user": {
    "username": "Adhrin",
    "status": "Building the future",
    "avatarUrl": "https://avatars.githubusercontent.com/u/1024025?v=4",
    "description": ["Full-Stack Developer", "UI/UX Designer", "Synthwave Enthusiast"],
    "location": "Cyberspace",
    "discordId": "306560934149226496",
    "useDiscordAvatar": true
  },
  "theme": {
    "profileOpacity": 60,
    "profileBlur": 20,
    "backgroundUrl": "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2070&auto=format&fit=crop",
    "customCursorUrl": "https://raw.githubusercontent.com/Simjas/tail-kit/main/public/images/mouse-cursor.png",
    "colors": {
        "primary": "#d946ef",
        "secondary": "#8b5cf6",
        "accent": "#06b6d4",
        "text": "#ffffff",
        "background": "#0f172a",
        "icon": "#ffffff"
    },
    "effects": {
      "glow": true,
      "backgroundBlur": true,
      "animatedTitle": true,
      "monochromeIcons": false
    }
  },
  "socials": [
    { "platform": "github", "url": "https://github.com/adhrin", "icon": "Github" },
    { "platform": "discord", "url": "https://discord.gg/adhrin", "icon": "Discord" },
    { "platform": "youtube", "url": "https://youtube.com/@adhrin", "icon": "Youtube" },
    { "platform": "twitter", "url": "https://twitter.com/adhrin", "icon": "Twitter" }
  ],
  "music": {
    "enabled": true,
    "volume": 0.5,
    "autoplay": false,
    "url": "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
  }
}');
```

## 4. Storage Setup
1.  Go to **Storage** in the Supabase dashboard.
2.  Create a new **public** bucket named `media`.
3.  Set the bucket to public so files can be accessed via URL.
4.  (Optional) Add policies to restrict uploads if you want, but ensure "Select" is public.

## 5. Row Level Security (RLS)
For simplicity in this portfolio (since only you edit it via the admin panel, presumably locally or protected via auth later):
1.  Enable RLS on `site_config`.
2.  Add a policy to allow **SELECT** for `anon` (public read access).
    ```sql
    CREATE POLICY "Public profiles are viewable by everyone"
    ON site_config FOR SELECT USING (true);
    ```
3.  Add a policy to allow **UPDATE** for authenticated users (or `anon` if you are testing locally without auth, but be careful in production!).
    ```sql
    -- DANGEROUS: Allows anyone to update config. Use only for local testing or implement Auth.
    CREATE POLICY "Anyone can update config"
    ON site_config FOR UPDATE USING (true);
    ```
