# Supabase Setup Instructions

## 1. Create a Project
1.  Go to [Supabase](https://supabase.com/) and create a new project.
2.  Once created, navigate to **Settings > API**.

## 2. Environment Variables
Create a `.env.local` file in the root of your project and add the following keys from your Supabase API settings, plus your GitHub Personal Access Token:

```env
NEXT_PUBLIC_SUPABASE_URL=your_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
GITHUB_PAT=your_github_pat
```

## 3. Database Schema
Go to the **SQL Editor** in your Supabase dashboard and run the following SQL to create the tables.

### `site_config` Table
```sql

-- Create the configuration table
CREATE TABLE IF NOT EXISTS site_config (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  data JSONB NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS for site_config
ALTER TABLE site_config ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Public read access for config"
ON site_config FOR SELECT USING (true);

-- Allow authenticated users (or anon for testing) to update
CREATE POLICY "Allow update for config"
ON site_config FOR UPDATE USING (true) WITH CHECK (true);
CREATE POLICY "Allow insert for config"
ON site_config FOR INSERT WITH CHECK (true);

-- Insert the initial default configuration
INSERT INTO site_config (data) VALUES ('{
  "siteMetadata": {
    "title": "Adhrin - Portfolio",
    "description": "Full-stack Developer & UI/UX Designer",
    "favicon": "/favicon.ico"
  },
  "user": {
    "username": "Adhrin",
    "status": "Building the future",
    "avatarUrl": "https://avatars.githubusercontent.com/u/1024025?v=4",
    "description": ["Full-Stack Developer", "UI/UX Designer", "Synthwave Enthusiast"],
    "location": "Cyberspace",
    "discordId": "306560934149226496",
    "useDiscordAvatar": true
  },
  "theme": {
    "profileOpacity": 60,
    "profileBlur": 20,
    "backgroundUrl": "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2070&auto=format&fit=crop",
    "customCursorUrl": "https://raw.githubusercontent.com/Simjas/tail-kit/main/public/images/mouse-cursor.png",
    "colors": {
        "primary": "#d946ef",
        "secondary": "#8b5cf6",
        "accent": "#06b6d4",
        "text": "#ffffff",
        "background": "#0f172a",
        "icon": "#ffffff"
    },
    "effects": {
      "glow": true,
      "backgroundBlur": true,
      "animatedTitle": true,
      "monochromeIcons": false,
      "tilt": true,
      "weather": "none",
      "visualizer": true
    }
  },
  "socials": [
    { "platform": "github", "url": "https://github.com/adhrin", "icon": "Github" },
    { "platform": "discord", "url": "https://discord.gg/adhrin", "icon": "Discord" },
    { "platform": "youtube", "url": "https://youtube.com/@adhrin", "icon": "Youtube" },
    { "platform": "tiktok", "url": "https://tiktok.com/@adhrin", "icon": "TikTok" }
  ],
  "music": {
    "enabled": true,
    "volume": 0.5,
    "autoplay": false,
    "url": "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
    "songTitle": "Neon Dreams",
    "albumIconUrl": ""
  },
  "github": {
    "username": "adhrin",
    "repos": [],
    "statsWidget": true
  }
}');
```

### `guestbook` Table
```sql
-- Create the guestbook table
CREATE TABLE IF NOT EXISTS guestbook (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  name TEXT NOT NULL,
  message TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS for guestbook
ALTER TABLE guestbook ENABLE ROW LEVEL SECURITY;

-- Allow public read access
CREATE POLICY "Public read access for guestbook"
ON guestbook FOR SELECT USING (true);

-- Allow public insert access (anyone can sign)
CREATE POLICY "Public insert access for guestbook"
ON guestbook FOR INSERT WITH CHECK (true);
```

## 4. Storage Setup
1.  Go to **Storage** in the Supabase dashboard.
2.  Create a new **public** bucket named `media`.
3.  Set the bucket to public so files can be accessed via URL.
4.  Ensure policies allow uploads (at least for authenticated users, or anon for testing).
